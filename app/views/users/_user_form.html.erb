<% if action_name == "edit" %>
    <p><%= link_to "Back to #{@user.name}", user_path(@user) %></p>
    <hr>
<% end %>


<% if @user.errors.any? %>
    <% emsg = {} %>
    <% @user.errors.messages.each do |attr, msg| %>
        <% emsg[attr] = msg if attr %>
    <% end %>
<% end %>

<section>
    <%= form_for @user do |f| %>
        <div class="form-field-group">
            <%= f.label :first_name, "First Name" %>
            <%= f.text_field :first_name %>
        </div>
        <%= (tag.p emsg[:first_name].first, class: "small-text red-text") if emsg && emsg[:first_name] %>

        <div class="form-field-group">
            <%= f.label :last_name, "Last Name" %>
            <%= f.text_field :last_name %>
        </div>
        <%= (tag.p emsg[:last_name].first, class: "small-text red-text") if emsg && emsg[:last_name] %>

        <div class="form-field-group">
            <%= f.label :username, "Username" %>
            <%= f.text_field :username %>
        </div>
        <%= (tag.p emsg[:username].first, class: "small-text red-text") if emsg && emsg[:username] %>

        <div class="form-field-group">
            <%= f.label :email, "Email" %>
            <%= f.text_field :email %>
        </div>
        <%= (tag.p emsg[:email].first, class: "small-text red-text") if emsg && emsg[:email] %>

        <div class="form-field-group">
            <%= f.label :password_digest, "Password" %>
            <%= f.password_field :password_digest %>
        </div>
        <%= (tag.p emsg[:password_digest].first, class: "small-text red-text") if emsg && emsg[:password_digest] %>

        <%= f.submit %>
    <% end %>
</section>

<% if action_name == "edit" %>
    <p><%= link_to "Delete", @user, method: :delete, data: { confirm: "Are you sure?" } %></p>
<% end %>

